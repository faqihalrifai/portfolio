[build]
  publish = "."
  functions = "netlify/functions"

[functions]
  node_bundler = "esbuild"
  # UPGRADE 1: Memaksa Netlify pakai Node.js versi terbaru (LTS) agar tidak error library-nya
  node_version = "20"

# UPGRADE 2: Menambahkan Security Headers
# Ini biar website kamu lebih aman dari serangan hacker
[[headers]]
  for = "/*"
  [headers.values]
    X-Frame-Options = "DENY"
    X-XSS-Protection = "1; mode=block"
    Content-Security-Policy = "upgrade-insecure-requests"

# UPGRADE 3: Redirects yang lebih pintar
[[redirects]]
  from = "/api/*"
  to = "/.netlify/functions/:splat"
  status = 200
  # Memastikan kalau ada error di function, tetap dianggap sebagai API call
  force = true 

[[redirects]]
  # Jika user mengetik URL yang salah, balikkan ke Home (mencegah 404 berantakan)
  from = "/*"
  to = "/index.html"
  status = 200
